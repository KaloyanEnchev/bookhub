{% extends 'common/base.html' %}

{% block title %}Create Review for {{ book.title }}{% endblock %}

{% block content %}
<div class="container my-5">
    <div class="card shadow-lg p-5 rounded-4 mx-auto" style="max-width: 600px;">
        <h1 class="mb-2 text-center fw-bold">Create Review</h1>
        <p class="text-center text-muted mb-4">
            for <strong>{{ book.title }}</strong>
        </p>

        <form method="post">
            {% csrf_token %}

            {% for field in form %}
                {% if field.name == 'is_spoiler' %}
                    {# -------------------------------------------------------- #}
                    {#  Choose ONE of the two layouts (comment the other out)   #}
                    {# -------------------------------------------------------- #}

                    {# 1️⃣  LABEL **ABOVE** THE CHECKBOX (vertical)           #}
                    {# -------------------------------------------------------- #}
                   {# 1️⃣  LABEL **ABOVE** THE CHECKBOX (vertical) – with a left‑shifted box #}
                    <div class="mb-3 spoiler-field">
                        <label class="fw-bold d-block mb-1"
                               for="{{ field.id_for_label }}">
                            {{ field.label }}
                        </label>
                    
                        {{ field }}   {# plain Django field output #}
                    
                        {% if field.errors %}
                            <div class="text-danger mt-1">{{ field.errors }}</div>
                        {% endif %}
                    </div>

                    {# 2️⃣  LABEL **TO THE LEFT** OF THE CHECKBOX (horizontal) #}
                    {# -------------------------------------------------------- #}
{#                    <div class="d-flex align-items-center mb-3">#}
{#                        <label class="fw-bold me-2"#}
{#                               for="{{ field.id_for_label }}">#}
{#                            {{ field.label }}#}
{#                        </label>#}
{#                        {{ field }}               {# plain Django field output #}
{#                        {% if field.errors %}#}
{#                            <div class="text-danger ms-2">{{ field.errors }}</div>#}
{#                        {% endif %}#}
{#                    </div>#}

                {% else %}
                    <div class="mb-3">
                        <label class="form-label fw-bold"
                               for="{{ field.id_for_label }}">{{ field.label }}</label>
                        {{ field }}
                        {% if field.errors %}
                            <div class="text-danger mt-1">{{ field.errors }}</div>
                        {% endif %}
                    </div>
                {% endif %}
            {% endfor %}

            <button type="submit" class="btn btn-success btn-lg w-100 mt-3">
                Create Review
            </button>
        </form>

        <a href="{% url 'books:details' book.slug %}" class="btn btn-outline-secondary btn-lg w-100 mt-3">
            Back to Book Details
        </a>
    </div>
</div>

<style>
    body { background-color: #f8f9fa; }
    .card { border-radius: 1rem; background-color: #fff; }

    input, textarea, select {
        width: 100%;
        padding: .65rem .75rem;
        border: 1px solid #ced4da;
        border-radius: .5rem;
        font-size: 1rem;
    }
    input:focus, textarea:focus, select:focus {
        border-color: #28a745;
        box-shadow: 0 0 5px rgba(40,167,69,.3);
        outline: none;
    }
    .btn { transition: all .3s ease; }
    .btn:hover { filter: brightness(.9); }
    
    .spoiler-field input[type="checkbox"] {
    margin-left: -240px;
    }
    
    .spoiler-field label {
        font-weight: 700;   /* same as Bootstrap’s .fw-bold */
    }
</style>
{% endblock %}